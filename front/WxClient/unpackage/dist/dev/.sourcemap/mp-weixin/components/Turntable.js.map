{"version":3,"sources":[null,"webpack:///D:/typora/EatBigTurntable/server/EatBigTurntableServer/front/WxClient/components/Turntable.vue?e661","webpack:///D:/typora/EatBigTurntable/server/EatBigTurntableServer/front/WxClient/components/Turntable.vue?b9e7","webpack:///D:/typora/EatBigTurntable/server/EatBigTurntableServer/front/WxClient/components/Turntable.vue?ec3d","uni-app:///components/Turntable.vue","webpack:///D:/typora/EatBigTurntable/server/EatBigTurntableServer/front/WxClient/components/Turntable.vue?0565","webpack:///D:/typora/EatBigTurntable/server/EatBigTurntableServer/front/WxClient/components/Turntable.vue?fc91"],"names":["components","LuckyWheel","props","prizeList","type","turntable","data","openMusic","roatingDuration","modalName","resultPrize","count","defaultConfig","accelerationTime","decelerationTime","audioPlay","audioEnd","blocks","padding","background","prizes","buttons","radius","pointer","fonts","text","top","created","destroyed","watch","deep","handler","methods","checkSetting","hideModal","uni","playAgain","randomInt","min","max","init","useWebAudioImplement","startCallBack","setTimeout","endCallBack","handConfim","turntableId","turntableName","result"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkI;AAClI;AAC6D;AACL;AACqC;;;AAG7F;AAC6L;AAC7L,gBAAgB,sLAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,gGAAM;AACR,EAAE,yGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAwuB,CAAgB,gqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;AC+C5vB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAA;IAAAC;EAAA;EACAC;IACAC;MACAC;IACA;IACA;IACAC;MACAD;IACA;EACA;EACAE;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAV;MACAW;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;QAAAC;QAAAC;MAAA;MACAC;QACA;MAAA,CACA;MACAC,UACA;QAAAC;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA,GACA;QACAG;QAAAH;QACAI;QACAC;UAAAC;UAAAC;QAAA;MACA;IAEA;EACA;EACAC;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACA1B;MACA2B;MACAC;QACA;QACA;QACA;UACA;QACA;MACA;IACA;EACA;EACAC;IACAC;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACAC;IACA;IACAC;MACA;MACA;MACAD;MACA;IACA;IACAE;MACA;MACAC;MACAC;MACA;IACA;IACAC;MACA;MACA;QAAAC;MAAA;MACA;QAAAA;MAAA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACA;QACA;QACA;MACA;MACA;MACA;QACA;MACA;MACA;MACAP;MACAQ;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;QACA;MACA;MACA;IACA;IACAC;MACA;QACAC;QACAC;QACAC;QACA5C;MACA;MACA;MACA;MACA;MACA+B;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACrLA;AAAA;AAAA;AAAA;AAAukC,CAAgB,+7BAAG,EAAC,C;;;;;;;;;;;ACA3lC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/Turntable.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./Turntable.vue?vue&type=template&id=0bb993b4&scoped=true&\"\nvar renderjs\nimport script from \"./Turntable.vue?vue&type=script&lang=js&\"\nexport * from \"./Turntable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Turntable.vue?vue&type=style&index=0&id=0bb993b4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0bb993b4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/Turntable.vue\"\nexport default component.exports","export * from \"-!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Turntable.vue?vue&type=template&id=0bb993b4&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Turntable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Turntable.vue?vue&type=script&lang=js&\"","<template>\r\n  <view>\r\n    <view class=\"turntable-title\">\r\n\t  {{turntable.title}}\r\n    </view>\r\n    <LuckyWheel\r\n\t :key=\"count\"\r\n      ref=\"myLucky\"\r\n      width=\"700rpx\"\r\n      height=\"700rpx\"\r\n\t  offsetDegree = 10\r\n      :blocks=\"blocks\"\r\n      :prizes=\"prizes\"\r\n      :buttons=\"buttons\"\r\n      :defaultStyle=\"defaultStyle\"\r\n\t  :default-config=\"defaultConfig\"\r\n      @start=\"startCallBack\"\r\n      @end=\"endCallBack\"\r\n    />\r\n\t<!-- 结果弹框 -->\r\n\t<view class=\"cu-modal\" :class=\"modalName=='DialogModal2'?'show':''\">\r\n\t<!-- <view class=\"cu-modal\" class=\"DialogModal2\"> -->\r\n\t\t<view class=\"cu-dialog\">\r\n\t\t\t<view class=\"cu-bar bg-white justify-end\">\r\n\t\t\t\t<view class=\"content\">抽奖结果</view>\r\n\t\t\t\t<view class=\"action\" @tap=\"hideModal\">\r\n\t\t\t\t\t<text class=\"cuIcon-close text-red\"></text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"padding-xl\">\r\n\t\t\t\t{{resultPrize.fonts[0].text}}\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-bar bg-white\">\r\n\t\t\t\t<view  class=\"action margin-0 flex-sub text-yellow \" @tap=\"playAgain()\">\r\n\t\t\t\t\t<text ></text>再来一次</view>\r\n\t\t\t\t<view class=\"action margin-0 flex-sub text-green solid-left\" @tap=\"sharPage\">\r\n\t\t\t\t\t<button open-type=\"share\" class=\"share-btn\">分享</button>\r\n\t\t\t\t\t<text>分享</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action margin-0 flex-sub text-red solid-left\" @tap=\"handConfim()\">确定</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  import {saveRecordAPI} from \"@/apis/rotationRecordApi.js\"\r\n  import LuckyWheel from '@/components/@lucky-canvas/uni/lucky-wheel'\r\n  export default {\r\n    components: { LuckyWheel },\r\n\tprops:{\r\n\t\tprizeList:{\r\n\t\t\ttype:Array\r\n\t\t},\r\n\t\t// 转盘信息\r\n\t\tturntable:{\r\n\t\t\ttype:Object\r\n\t\t}\r\n\t},\r\n    data () {\r\n      return {\r\n\t\topenMusic:true,\r\n\t\troatingDuration:2,\r\n\t\tmodalName:\"\",\r\n\t\tresultPrize:null,\r\n\t\tcount:0,\r\n\t\tLuckyWheel:null,\r\n\t\tdefaultConfig:{\r\n\t\t\taccelerationTime:2000,\r\n\t\t\tdecelerationTime:1600,\r\n\t\t},\r\n\t\taudioPlay:null,\r\n\t\taudioEnd:null,\r\n        blocks: [{ padding: '13px', background: 'red' }],\r\n        prizes: [\r\n          // { fonts: [{ text: '炒饭', top: '10%' }], background: '#e9e8fe' },\r\n        ],\r\n        buttons: [\r\n          { radius: '50px', background: '#FFA500' },\r\n          { radius: '45px', background: '#FFA500' },\r\n          {\r\n            radius: '40px', background: '#FFA500',\r\n            pointer: true,\r\n            fonts: [{ text: '吃货\\n开奖', top: '-20px' }]\r\n          },\r\n        ],\r\n      }\r\n    },\r\n\tcreated(){\r\n\t\tthis.init()\r\n\t},\r\n\tdestroyed(){\r\n\t\tthis.audioPlay.destroy() // 释放资源\r\n\t\tthis.audioEnd.destroy()\r\n\t},\r\n\twatch:{\r\n\t\tprizeList:{\r\n\t\t\tdeep: true,\r\n\t\t\thandler(newVal,oldVal){\r\n\t\t\t\tthis.prizes =[...newVal]\r\n\t\t\t\tthis.count++\r\n\t\t\t\tif(this.LuckyWheel){\r\n\t\t\t\t\tthis.LuckyWheel.init(this.prizes)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n    methods: {\r\n\t\tcheckSetting(){\r\n\t\t\tlet duration = uni.getStorageSync(\"roatingDuration\")\r\n\t\t\tlet openMusic = uni.getStorageSync(\"openMusic\")\r\n\t\t\tthis.roatingDuration = duration?duration:this.roatingDuration\r\n\t\t\tthis.openMusic = openMusic!='' || openMusic!=undefined?openMusic:this.openMusic\r\n\t\t},\r\n\t\thideModal(){\r\n\t\t\tthis.modalName = \"\"\r\n\t\t\tuni.setStorageSync(\"routing\",false)\r\n\t\t},\r\n\t\tplayAgain(){\r\n\t\t\t// 再来一次\r\n\t\t\tthis.modalName = \"\"\r\n\t\t\tuni.setStorageSync(\"routing\",false)\r\n\t\t\tthis.startCallBack()\r\n\t\t},\r\n\t\trandomInt(min, max) {\r\n\t\t  // 确保 min 和 max 都是整数，并且 min <= max\r\n\t\t  min = Math.ceil(min);\r\n\t\t  max = Math.floor(max);\r\n\t\t  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n\t\t},\r\n\t\tinit(){\r\n\t\t\tthis.prizes.prizeList = this.prizeList\r\n\t\t\tthis.audioPlay = uni.createInnerAudioContext({useWebAudioImplement: true});\r\n\t\t\tthis.audioEnd = uni.createInnerAudioContext({useWebAudioImplement: true});\r\n\t\t\tthis.audioPlay.src = \"/static/audio/audioPlayForce_1.mp3\"; // 本地或网络音频\r\n\t\t\tthis.audioPlay.loop = true\r\n\t\t\tthis.audioEnd.src = \"/static/audio/audioEnd.mp3\"\r\n\t\t\t// this.LuckyWheel = this.$refs.myLucky\r\n\t\t},\r\n      // 点击抽奖按钮触发回调\r\n      startCallBack () {\r\n        // 先开始旋转\r\n\t\tlet routing = uni.getStorageSync(\"routing\")\r\n\t\tif(routing){\r\n\t\t\t// 之前装盘还未出结果，无法再次转动\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.checkSetting()\r\n\t\tif(this.openMusic){\r\n\t\t\tthis.audioPlay.play()\r\n\t\t}\r\n        this.$refs.myLucky.play()\r\n\t\tuni.setStorageSync(\"routing\",true)\r\n        setTimeout(() => {\r\n          // 调用stop停止旋转并传递中奖奖品  不传入小标则可以使用range 权重了\r\n\t\t\tthis.$refs.myLucky.stop()\r\n        }, this.roatingDuration*1000)\r\n      },\r\n      // 抽奖结束触发回调\r\n\tendCallBack (prize) {\r\n\t\tthis.resultPrize = prize\r\n\t\tthis.audioPlay.stop()\r\n\t\tif(this.openMusic){\r\n\t\t\tthis.audioEnd.play()\r\n\t\t}\r\n\t\tthis.modalName = \"DialogModal2\"\r\n\t  },\r\n\thandConfim(){\r\n\t\tlet saveRecordData = {\r\n\t\t\t\t\t\tturntableId:this.turntable.id,\r\n\t\t\t\t\t\tturntableName:this.turntable.title,\r\n\t\t\t\t\t\tresult:this.resultPrize.fonts[0].text,\r\n\t\t\t\t\t\ttype:this.turntable.type\r\n\t\t\t\t\t} \r\n\t\tsaveRecordAPI(saveRecordData)\r\n\t\tthis.$emit(\"routeDone\",this.resultPrize.fonts[0])\r\n\t\tthis.modalName = \"\"\r\n\t\tuni.setStorageSync(\"routing\",false)\r\n\t}\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\t.turntable-title{\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: bolder;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tpadding: 15rpx;\r\n\t}\r\n\t.share-btn{\r\n\t\topacity: 0;\r\n\t\tposition: absolute;\r\n\t}\r\n</style>","import mod from \"-!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Turntable.vue?vue&type=style&index=0&id=0bb993b4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Turntable.vue?vue&type=style&index=0&id=0bb993b4&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1752596083331\n      var cssReload = require(\"D:/微信小程序开发/hbuiderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}